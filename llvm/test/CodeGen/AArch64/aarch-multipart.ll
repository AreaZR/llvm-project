; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 4
; RUN: llc < %s -o - | FileCheck %s

target datalayout = "e-m:o-i64:64-i128:128-n32:64-S128"
target triple = "arm64-apple-os"

declare <4 x double> @user_func(<4 x double>) #1

; Make sure we are not crashing on this code.
; CHECK-LABEL: caller_function
; CHECK: ret
define void @caller_function(<4 x double>, <4 x double>, <4 x double>, <4 x double>, <4 x double>) #1 {
; CHECK-LABEL: caller_function:
; CHECK:       // %bb.0: // %entry
; CHECK-NEXT:    str x30, [sp, #-16]! // 8-byte Folded Spill
; CHECK-NEXT:    ldp q0, q1, [sp, #16]
; CHECK-NEXT:    bl user_func
; CHECK-NEXT:    ldr x30, [sp], #16 // 8-byte Folded Reload
; CHECK-NEXT:    ret
entry:
  %r = call <4 x double> @user_func(<4 x double> %4)
  ret void
}

attributes #1 = { nounwind readnone }


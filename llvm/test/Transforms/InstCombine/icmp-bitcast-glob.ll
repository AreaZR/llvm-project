; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt < %s -passes=instcombine -S | FileCheck %s

declare i32 @f32(ptr, ptr)

declare i32 @f64(ptr, ptr)

define i1 @icmp_func() {
; CHECK-LABEL: define i1 @icmp_func() {
; CHECK-NEXT:    ret i1 false
;
  %cmp = icmp eq ptr @f32, @f64
  ret i1 %cmp
}

define i1 @icmp_fptr(ptr) {
; CHECK-LABEL: define i1 @icmp_fptr(
; CHECK-SAME: ptr [[TMP0:%.*]]) {
; CHECK-NEXT:    [[CMP:%.*]] = icmp ne ptr [[TMP0]], @f32
; CHECK-NEXT:    ret i1 [[CMP]]
;
  %cmp = icmp ne ptr @f32, %0
  ret i1 %cmp
}

@b = external global i32

define i32 @icmp_glob(i32 %x, i32 %y) {
; CHECK-LABEL: define i32 @icmp_glob(
; CHECK-SAME: i32 [[X:%.*]], i32 [[Y:%.*]]) {
; CHECK-NEXT:    ret i32 [[Y]]
;
  %cmp = icmp eq ptr @icmp_glob, @b
  %sel = select i1 %cmp, i32 %x, i32 %y
  ret i32 %sel
}

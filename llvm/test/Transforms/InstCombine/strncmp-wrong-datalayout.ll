; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; Test that the strncpy simplification doesn't crash if datalayout specifies
; 64 bit pointers while length is a 32 bit argument
;
; RUN: opt < %s -passes=instcombine -S | FileCheck %s

target datalayout = "e-p:64:64:64"

declare i32 @strncmp(ptr, ptr, i32)

define i32 @test6(ptr %str1, ptr %str2) {
; CHECK-LABEL: define i32 @test6(
; CHECK-SAME: ptr [[STR1:%.*]], ptr [[STR2:%.*]]) {
; CHECK-NEXT:    [[TEMP1:%.*]] = call i32 @strncmp(ptr [[STR1]], ptr [[STR2]], i32 1)
; CHECK-NEXT:    ret i32 [[TEMP1]]
;

  %temp1 = call i32 @strncmp(ptr %str1, ptr %str2, i32 1)
  ret i32 %temp1
}
